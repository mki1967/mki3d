<!DOCTYPE html>
<html id="htmlId">
  <!--
      MKI 3D RAPID MODELER
      Copyright (C) 2015  Marcin Kik mki1967@gmail.com 
      The JavaScript code in this page is free software: you can
      redistribute it and/or modify it under the terms of the GNU
      General Public License (GNU GPL) as published by the Free Software
      Foundation, either version 3 of the License, or (at your option)
      any later version.  The code is distributed WITHOUT ANY WARRANTY;
      without even the implied warranty of MERCHANTABILITY or FITNESS
      FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

      As additional permission under GNU GPL version 3 section 7, you
      may distribute non-source (e.g., minimized or compacted) forms of
      that code without the copy of the GNU GPL normally required by
      section 4, provided you include this license notice and a URL
      through which recipients can access the Corresponding Source.
    -->
  <head>
    <title>MKI 3D RAPID MODELER</title>
    <link rel="stylesheet" href="styles.css">
  </head>

  <body>


    <script src="js/mki3d_constants.js"></script>
    <script src="js/mki3d.js"></script>
    <script src="js/mki3d_algebra.js"></script>
    <script src="js/mki3d_base.js"></script>
    <script src="js/mki3d_tmp.js"></script>
    <script src="js/mki3d_html.js"></script>
    <script src="js/mki3d_data.js"></script>
    <script src="js/mki3d_set.js"></script>
    <script src="js/mki3d_file.js"></script>
    <script src="js/mki3d_studio.js"></script>
    <script src="js/mki3d_gl.js"></script>
    <script src="js/mki3d_action.js"></script>
    <script src="js/mki3d_callback.js"></script>


    <!---
	<div> You can find more info on <a href="https://github.com/mki1967" target="_blank">https://github.com/mki1967</a> </div>
	-->


    <div id="divHelp" display="none"  style="overflow-y: auto;">
      <h2>Help screen:</h2>

      <p> (Press 'Q' or Escape to return to the canvas.) </p>

      <h3> Warnings: </h3>    

      <p>
	Data protection mechanisms such as 'undo' or 'autosave' are still not implemented.
	User operations are irreversible without warnings.
	The best strategy is frequent saving of your data in a file. 
      </p>

      <h3> Key presses on the canvas: </h3>
      <p>
	<dl>
	  <dt>'H'</dt>
	  <dd> - This help screen</dd>
	  <dt>'Q'</dt>
	  <dd> - Main menu</dd>
	  <dt> Arrow Keys, 'F', 'B','V'</dt>
	  <dd> - Depending on the MODE, either: move cursor, selected endpoints,  or rotate the screen</dd>
	  <dt>'A'</dt>
	  <dd> - Switch action MODE (either rotate, move cursor, or move selected endpoints)</dd>
	  <dt>'N'</dt>
	  <dd> - Change current SET INDEX</dd>
	  <dt>Shift</dt>
	  <dd> - Switch action MODE to: 
	    <ul>
	      <li> CURSOR moving - when pressed </li>
	      <li> ROTATION - when released </li>
	    </ul>
	  </dd>
	  <dt>Space</dt>
	  <dd> - Align view rotation to right angles</dd>
	  <dt>Enter</dt>
	  <dd> - Depending on markers:
	    <ul>
	      <li> if MARKER1 is not set, then set MARKER1 </li>
	      <li> if only MARKER1 is set, then insert segment between MARKER1 and CURSOR 
		and set MARKER1 to CURSOR 
	      </li>
	      <li> if MARKER1 and MARKER2 are both set, then insert triangle between MARKER1, MARKER2, and CURSOR
		and set MARKER1 to CURSOR and cancel MARKER2
	      </li>
	    </ul> 
	  </dd>
	  <dt>Escape</dt>
	  <dd> - Cancel both markers </dd>
	  <dt>'T'</dt>
	  <dd> - Toggle MARKER2 (either set it to CURSOR or cancel it) </dd>
	</dl>
      </p>
      

      <h3> General description </h3>
      <p>
	The <em>model</em> consists of line <em>segments</em> and <em>triangles</em>.
        Each <em>segment</em> is defined by a pair of <em>points</em> (<em> endpoints</em> of the segment). 
        Each <em>triangle</em> is defined by a triple of <em>points</em> (<em> endpoints</em> of the triangle). 
        Each <em>point</em> has position in (x,y,z) coordinates and a color (red,green,blue).
        Each <em>point</em> belongs to a single <em>set</em>.
        The <em>sets</em> are indexed by natural numbers.
	The set index numbers are assigned automatically to the endpoints,
	and the program tries to keep the indexes of non-empty sets to be consecutive numbers
	starting from zero.
        Element is <em>in</em> a set if all its endpoints are in the set.
	Element is <em>incident to</em> a set if at least one of its endpoints is in the set.
        Element is <em>glue element</em> if its endpoints are in different sets.
	Glue element is incident to more than one set and it is not in any set.

	Endpoints can be <em>selected</em>.
	Element is <em>selected</em> if all its endpoints are selected.
      </p>

      <h3> Some Usage Hints </h3>
      <ul>
	<li>
          Press the Shift key to move the cursor with the Arrows and 'B' (i.e. back), 'F' (i.e. forward) keys.
	</li>
	<li>
          Release the Shift key to rotate the model around the cursor with the arrows and 'B', 'F'.
          (Focus point - the center of the screen - is set to the cursor position.)
	</li>
	<li>
	  Use Space to align rotation rotation to right angles.
	</li>
        <li>
          To insert segment lines:
	  <ol>
	    <li> move the cursor to the first endpoint and press Enter to set MARKER1, </li>
	    <li> move the cursor to the second endpoint and press Enter to insert the segment 
	      and to set MARKER1 at the new position, </li>
            <li> and so on - continue with the next endpoints.</li>
	  </ol>
          To stop inserting lines, press Escape to reset markers.
        </li>
        <li> 
          To insert a triangle:
	  <ol>
	    <li> move the cursor to the first endpoint and press Enter to set MARKER1, </li>
	    <li> move the cursor to the second endpoint and press 'T' to set MARKER2, </li>
            <li> move the cursor to the third endpoint and press Enter to insert the triangle. 
              (This also sets MARKER1, so you can continue inserting segments or triangles.)
	    </li>
	  </ol>

	</li>
	<li> 
          The light consists of directional fraction and small ambient fraction. 
	  To set directional light for triangles' shading, rotate the model and press 'QDL' sequence of keys.
          Directional light is set perpendicular to the screen (in both directions).
	</li>
	<li>
	  The color of inserted endpoint is the color of the cursor.
          The selected endpoints can be painted with current cursor color.
          If endpoints of the element have different colors, 
	  the colors inside the element are interpolated.
	</li>
	<li>
          You can limit visibility by clipping - the key sequences 'QX...'
	</li>
	<li>
	  You can select endpoints - the key sequences 'QS ...'
	</li>
	<li>
	  You may use selection to limit visibility (in 'QV' sub-menu) or 
	  manipulate selected endpoints (in 'QD' sub-menu)
	</li>
	<li>
	  Sets can be used for grouping endpoints.
	  Use 'N' in canvas mode to cycle through the sets inspecting their included and incident elements.
          (The last set in the cycle is always empty - stop at it if you want the following endpoints to be 
          in a new set.)
	  You also create a new set when you are making a copy of selected elements ('QDC...').
          After creation of a copy, the selection is switched to this new copy.
          Thus the action of moving selected endpoints moves the new copy.
	</li>
	<li>
	  To cancel view restrictions use 'QVC' sequence.
	</li>
	<li>
	  DO NOT FORGET TO SAVE YOUR DATA (key sequence: 'QFS')
	</li>
      </ul>
      
      <h3>About</h3>
      <p> 
	MKI3D RAPID MODELER by Marcin Kik mki1967@gmail.com. 
	The project is hosted on <a href="https://github.com/mki1967/mki3d" target="_blank">https://github.com/mki1967/mki3d</a> 
      </p>


    </div>

    <div id="divMainMenu" display="none">
      <h2>Main Menu:</h2>
      <dl>
	<dt>'F'</dt>
	<dd> - FILE [...]</dd>
	<dt>'S'</dt>
	<dd> - SELECTION [...]</dd>
	<dt>'C'</dt>
	<dd> - CURSOR [...]</dd>
	<dt>'D'</dt>
	<dd> - DATA [...]</dd>
	<dt>'V'</dt>
	<dd> - VIEW [...]</dd>
	<dt>'X'</dt>
	<dd> - CLIP [...]</dd>
      </dl>
    </div>

    <div id="divColorMenu" display="none">
      <h2>Color Menu:</h2>
      <dl id="dlColor">
	<dt style="color:rgb(255,255,255); background-color:rgb(0,0,0);">'0'</dt>
	<dd id="ddColor0" style="color:rgb(255,255,255); background-color:rgb(0,0,0);"> [0,0,0] </dd>
	<dt style="background-color:rgb(0,0,255);">'1'</dt>
	<dd id="ddColor1" style="background-color:rgb(0,0,255);"> [0,0,1] </dd>
	<dt style="background-color:rgb(0,255,0);">'2'</dt>
	<dd id="ddColor2" style="background-color:rgb(0,255,0);"> [0,1,0] </dd>
	<dt style="background-color:rgb(0,255,255);">'3'</dt>
	<dd id="ddColor3" style="background-color:rgb(0,255,255);"> [0,1,1] </dd>
	<dt style="background-color:rgb(255,0,0);">'4'</dt>
	<dd id="ddColor4" style="background-color:rgb(255,0,0);"> [1,0,0] </dd>
	<dt style="background-color:rgb(255,0,255);">'5'</dt>
	<dd id="ddColor5" style="background-color:rgb(255,0,255);"> [1,0,1] </dd>
	<dt style="background-color:rgb(255,255,0);">'6'</dt>
	<dd id="ddColor6" style="background-color:rgb(255,255,0);"> [1,1,0] </dd>
	<dt style="background-color:rgb(255,255,255); color:rgb(0,0,0);" >'7' </dt>
	<dd id="ddColor7" style="background-color:rgb(255,255,255);"> [1,1,1] </dd>
	<dt style="color:rgb(255,0,0);">'E','R'</dt>
	<dd style="color:rgb(255,0,0);"> FINE TUNE RED COMPONENT </dd>
	<dt style="color:rgb(0,255,0);">'F','G'</dt>
	<dd style="color:rgb(0,255,0);"> FINE TUNE GREEN COMPONENT </dd>
	<dt style="color:rgb(0,0,255);">'V','B'</dt>
	<dd style="color:rgb(0,0,255);"> FINE TUNE BLUE COMPONENT </dd>
	<dt> 'N'</dt>
	<dd> CYCLE TROUGH THE COLORS OF SELECTED ENDPOINTS</dd>
	<dt> Escape, 'Q'</dt>
	<dd> RETURN TO CANVAS </dd>
      </dl>
    </div>

    <div id="divCursorMenu" display="none">
      <h2>Cursor Menu:</h2>
      <dl>
	<dt>'C'</dt>
	<dd> - SET CURSOR COLOR </dd>
	<dt>'J'</dt>
	<dd> - JUMP TO THE NEAREST ENDPOINT </dd>
	<dt>'S'</dt>
	<dd> - JUMP TO THE NEAREST SELECTED ENDPOINT </dd>
      </dl>
    </div>

    <div id="divFileMenu" display="none">
      <h2>File Menu:</h2>
      <dl>
	<dt>'S'</dt>
	<dd> - SAVE </dd>
	<dt>'L'</dt>
	<dd> - LOAD </dd>
      </dl>
    </div>

    <div id="divDataMenu" display="none">
      <h2>Data Menu:</h2>
      <dl>
	<dt>'L'</dt>
	<dd> - LIGHT DIRECTION  </dd>
	<dt>'B'</dt>
	<dd> - BACKGROUND COLOR </dd>
	<dt>'0'</dt>
	<dd> - PAINT SELECTED ENDPOINTS WITH CURSOR COLOR </dd>
	<dt>'2'</dt>
	<dd> - PAINT SELECTED SEGMENTS WITH CURSOR COLOR </dd>
	<dt>'3'</dt>
	<dd> - PAINT SELECTED TRIANGLES WITH CURSOR COLOR </dd>
	<dt>'4'</dt>
	<dd> - DELETE SELECTED SEGMENTS </dd>
	<dt>'5'</dt>
	<dd> - DELETE SELECTED TRIANGLES </dd>
	<dt>'C'</dt>
	<dd> - COPY  SUB-MENU ... </dd>
      </dl>
    </div>

    <div id="divDataCopyMenu" display="none">
      <h2>Data Copy Menu:</h2>
      <dl>
	<dt>'0'</dt>
	<dd> - COPY SELECTED ELEMENTS TO A NEW SET  </dd>
 	<dt>'1'</dt>
	<dd> - COPY SELECTED ELEMENTS TO A NEW SET WITH GLUES BETWEEN SEGMENTS' ENDPOINTS </dd>
 	<dt>'2'</dt>
	<dd> - COPY SELECTED ELEMENTS TO A NEW SET WITH GLUES BETWEEN SEGMENTS </dd>
 	<dt>'3'</dt>
	<dd> - COPY SELECTED ELEMENTS TO A NEW SET WITH GLUES BETWEEN SEGMENTS AND SEGMENTS' ENDPOINTS </dd>
      </dl>
    </div>



    <div id="divClipMenu" display="none">
      <h2>Clip Menu:</h2>
      <dl>
	<dt>Arrows, 'B', 'F'</dt>
	<dd> - TOGGLE CLIPPING IN THAT DIRECTION  </dd>
	<dt>'R'</dt>
	<dd> - REMOVE CLIPPING </dd>
      </dl>
    </div>

    <div id="divSelectionMenu" display="none">
      <h2>Selection Menu:</h2>
      <dl>
	<dt>'X'</dt>
	<dd> - ADD ENDPOINTS IN CLIPPING BOX  </dd>
	<dt>'C'</dt>
	<dd> - ADD ENDPOINTS INCIDENT TO CURSOR AND MARKERS  </dd>
	<dt>'S'</dt>
	<dd> - ADD ENDPOINTS FROM THE CURRENT SET  </dd>
	<dt>'2'</dt>
	<dd> - ADD ALL ENDPOINTS OF SEGMENTS INCIDENT TO SELECTION </dd>
	<dt>'3'</dt>
	<dd> - ADD ALL ENDPOINTS OF TRIANGLES INCIDENT TO SELECTION </dd>
	<dt>'4'</dt>
	<dd> - UNSELECT SEGMENTS </dd>
	<dt>'5'</dt>
	<dd> - UNSELECT TRIANGLES </dd>
	<dt>'R'</dt>
	<dd> - CANCEL ALL SELECTIONS  </dd>
	<dt>'E'</dt>
	<dd> - EXTRACT THE SELECTED ENDPOINTS TO A NEW SET  </dd>
      </dl>
    </div>

    <div id="divViewMenu" display="none">
      <h2>View Menu:</h2>
      <dl>
	<dt>'1'</dt>
	<dd> - RESTRICT VISIBILITY TO ELEMENTS INCLUDED IN SELECTED ENDPOINTS </dd>
	<dt>'2'</dt>
	<dd> - RESTRICT VISIBILITY TO SEGMENTS INCLUDED IN SELECTED ENDPOINTS </dd>
	<dt>'3'</dt>
	<dd> - RESTRICT VISIBILITY TO TRIANGLES INCLUDED IN SELECTED ENDPOINTS </dd>
	<dt>'C'</dt>
	<dd> - CANCEL VISIBILITY RESTRICTIONS </dd>
	<dt>'D'</dt>
	<dd> - DOWNSCALE THE VIEW  </dd>
	<dt>'U'</dt>
	<dd> - UPSCALE THE VIEW   </dd>
      </dl>
    </div>

    <div id="divActionMenu" display="none">
      <h2>Action Menu:</h2>
      <dl>
	<dt>'R'</dt>
	<dd> - ROTATION </dd>
	<dt>'C'</dt>
	<dd> - CURSOR MOVE </dd>
	<dt>'S'</dt>
	<dd> - SELECTION MOVE</dd>
	<!--
	<dt>'L'</dt>
	<dd> - RIGHT ANGLE SELECTION ROTATE AROUD THE CURSOR</dd>
	<dt>'M'</dt>
	<dd> - MIRROR REFLECTION BY CURSOR PLANES </dd>
	-->
      </dl>
    </div>

    <div id="divCanvas" style="position: relative;">
      <!-- <canvas id="canvasId" width="640" height="400"  style="border:0px; margin: 0px; padding: 0px;" > -->
      <canvas id="canvasId" style="border:0px; margin: 0px; padding: 0px;" >
	Your browser does not support the canvas element.
      </canvas>
      <div id="divUpperMessage" style="position: absolute; top: 0px; left: 0px; color: black; background-color: white;"> 
	UPPER MESSAGE 
      </div>
    </div>
  </body>
</html>
